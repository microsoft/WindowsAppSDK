<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <Target Name="WindowsAppRuntimeAutoInitializer">
    <PropertyGroup>
      <AutoInitializerPreprocessorDefinitions />
      <AutoInitializerPreprocessorDefinitions Condition="'$(WindowsAppSdkBootstrapInitialize)'=='true'">
        MICROSOFT_WINDOWSAPPSDK_AUTOINITIALIZE_BOOTSTRAP;$(AutoInitializerPreprocessorDefinitions)
      </AutoInitializerPreprocessorDefinitions>
      <AutoInitializerPreprocessorDefinitions Condition="'$(WindowsAppSdkDeploymentManagerInitialize)'=='true'">
        MICROSOFT_WINDOWSAPPSDK_AUTOINITIALIZE_DEPLOYMENTMANAGER;$(AutoInitializerPreprocessorDefinitions)
      </AutoInitializerPreprocessorDefinitions>
      <AutoInitializerPreprocessorDefinitions Condition="'$(WindowsAppSdkUndockedRegFreeWinRTInitialize)'=='true'">
        MICROSOFT_WINDOWSAPPSDK_AUTOINITIALIZE_UNDOCKEDREGFREEWINRT;$(AutoInitializerPreprocessorDefinitions)
      </AutoInitializerPreprocessorDefinitions>
      <AutoInitializerPreprocessorDefinitions Condition="'$(WindowsAppSdkCompatibilityInitialize)'=='true'">
        MICROSOFT_WINDOWSAPPSDK_AUTOINITIALIZE_COMPATIBILITY;$(AutoInitializerPreprocessorDefinitions)
      </AutoInitializerPreprocessorDefinitions>
    </PropertyGroup>

    <ItemGroup>
      <AutoInitializerClCompile Include="$(MSBuildThisFileDirectory)..\..\include\WindowsAppRuntimeAutoInitializer.cpp">
        <PrecompiledHeader>NotUsing</PrecompiledHeader>
        <PreprocessorDefinitions>$(AutoInitializerPreprocessorDefinitions)</PreprocessorDefinitions>
      </AutoInitializerClCompile>
    </ItemGroup>

    <ItemGroup>
      <ClCompile Include="@(AutoInitializerClCompile->'%(Identity)')">
        <PrecompiledHeader>%(AutoInitializerClCompile.PrecompiledHeader)</PrecompiledHeader>
        <PreprocessorDefinitions>%(AutoInitializerClCompile.PreprocessorDefinitions)</PreprocessorDefinitions>
      </ClCompile>
    </ItemGroup>
  </Target>

  <PropertyGroup>
    <BeforeClCompileTargets>
      $(BeforeClCompileTargets);WindowsAppRuntimeAutoInitializer;
    </BeforeClCompileTargets>
  </PropertyGroup>

</Project>
